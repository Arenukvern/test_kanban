import{d as a,b as e,_ as s,r as i,c as r,e as l,f as o,g as t,h as d,t as n,w as u,T as m,m as g,n as p,l as c,v as V,i as f,j as h}from"./index.7b19160d.js";import{U as w}from"./auth.a53f3805.js";import{u as E,a as v}from"./password.f67d835d.js";var _,C,y;(C=_||(_={}))[C.register=0]="register",C[C.registered=1]="registered",(y||(y={})).openSignIn="openSignIn";var b=a({name:"sign-up",components:{Field:e((()=>s((()=>__import__("./field.ba1cb11d.js")),["/test_projects/assets/field.ba1cb11d.js","/test_projects/assets/index.7b19160d.js","/test_projects/assets/index.747239a4.css"]))),IconButton:e((()=>s((()=>__import__("./icon-button.49984341.js")),["/test_projects/assets/icon-button.49984341.js","/test_projects/assets/index.7b19160d.js","/test_projects/assets/index.747239a4.css","/test_projects/assets/styled-button-i.3171b0e3.js"]))),StyledButton:e((()=>s((()=>__import__("./styled-button.4585f74c.js")),["/test_projects/assets/styled-button.4585f74c.js","/test_projects/assets/styled-button-i.3171b0e3.js","/test_projects/assets/index.7b19160d.js","/test_projects/assets/index.747239a4.css"])))},emits:[y.openSignIn],setup(a,e){const s=i(0),l=r((()=>0==s.value)),o=r((()=>1==s.value)),{email:t,isEmailNotEmpty:d,isEmailValid:n,emailValidator:u,isEmailExists:m,emailFormatErrorMessage:g}=E(),{password:p,passwordLengthErrorMessage:c,user:V,isPasswordValid:f,passwordValidator:h}=v({email:t}),_=r((()=>m.value?"this email already exists, try different":g)),C=r((()=>{switch(!0){case l.value:return"Register";case o.value:default:return""}})),b=i(""),S=i(!1),I=r((()=>f.value&&S.value&&n&&!m.value));return{openSignIn:()=>{e.emit(y.openSignIn,V.value)},title:C,email:t,isEmailNotEmpty:d,emailErrorMessage:_,isEmailValid:n,emailValidator:u,isEmailExists:m,password:p,passwordLengthErrorMessage:c,user:V,isPasswordValid:f,passwordValidator:h,isRegister:l,isRegistered:o,passwordConfirmation:b,isPasswordConfirmationValid:S,passwordConfirmationValidator:({value:a})=>a==p.value,isReadyToRegister:I,register:()=>{w.create({user:V.value}),s.value=1}}}});const S={class:"text center h4"},I=d("div",{class:"h-4"},null,-1),M={class:"column main-align-start fade-group-item",key:"register"},k={class:"column main-align-start fade-group-item",key:"registered"},R=d("div",{class:"p"},"You succefully registered! ",-1),P=h("Sign in");b.render=function(a,e,s,i,r,h){const w=l("field"),E=l("icon-button"),v=l("styled-button");return o(),t("div",null,[d("p",S,n(a.title),1),I,d(m,{name:"fade-group",tag:"div"},{default:u((()=>[a.isRegister?(o(),t("div",M,[d(w,{placeholder:"email",type:"email",modelValue:a.email,"onUpdate:modelValue":e[1]||(e[1]=e=>a.email=e),validationCallback:a.emailValidator,errorMessage:a.emailErrorMessage,required:!0,onUpdateIsValueValid:e[2]||(e[2]=e=>a.isEmailValid=e),showErrorMessage:a.isEmailExists,hightlightSuccess:!a.isEmailExists&&a.isEmailValid},null,8,["modelValue","validationCallback","errorMessage","showErrorMessage","hightlightSuccess"]),d(w,{placeholder:"password",type:"password",modelValue:a.password,"onUpdate:modelValue":e[3]||(e[3]=e=>a.password=e),validationCallback:a.passwordValidator,errorMessage:a.passwordLengthErrorMessage,required:!0,onUpdateIsValueValid:e[4]||(e[4]=e=>a.isPasswordValid=e),hightlightSuccess:a.isPasswordValid},null,8,["modelValue","validationCallback","errorMessage","hightlightSuccess"]),d(w,{placeholder:"confirm password",type:"password",modelValue:a.passwordConfirmation,"onUpdate:modelValue":e[5]||(e[5]=e=>a.passwordConfirmation=e),validationCallback:a.passwordConfirmationValidator,errorMessage:"Password doesn't match",required:!0,onUpdateIsValueValid:e[6]||(e[6]=e=>a.isPasswordConfirmationValid=e),hightlightSuccess:a.isPasswordConfirmationValid,onKeyup:g(a.register,["enter"])},{suffix:u((()=>[d(p,{name:"fade"},{default:u((()=>[c(d(E,{class:"ml-4",onClick:a.register},{default:u((()=>[d("img",{src:"./assets/send.svg"},null,8,["src"])])),_:1},8,["onClick"]),[[V,a.isReadyToRegister]])])),_:1})])),_:1},8,["modelValue","validationCallback","hightlightSuccess","onKeyup"])])):f("",!0),a.isRegistered?(o(),t("div",k,[R,d(v,{onClick:a.openSignIn},{default:u((()=>[P])),_:1},8,["onClick"])])):f("",!0)])),_:1})])};export default b;
