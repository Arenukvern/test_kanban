import{d as a,b as s,_ as e,r as i,c as r,k as l,o,e as d,f as t,g as n,h as u,t as m,w as c,T as p,l as w,v,m as f,n as g,i as E,j as y}from"./index.7b19160d.js";import{U as h}from"./auth.a53f3805.js";import{u as _,a as V}from"./password.f67d835d.js";var P,k,b;(k=P||(P={}))[k.email=0]="email",k[k.password=1]="password",k[k.passwordRecovery=2]="passwordRecovery",k[k.authorized=3]="authorized",(b||(b={})).switchToSignUp="switchToSignUp";var C=a({name:"sign-in",emits:[b.switchToSignUp],props:{email:{type:String,default:"",required:!1}},components:{Field:s((()=>e((()=>__import__("./field.ba1cb11d.js")),["/test_projects/assets/field.ba1cb11d.js","/test_projects/assets/index.7b19160d.js","/test_projects/assets/index.747239a4.css"]))),StyledButton:s((()=>e((()=>__import__("./styled-button.4585f74c.js")),["/test_projects/assets/styled-button.4585f74c.js","/test_projects/assets/styled-button-i.3171b0e3.js","/test_projects/assets/index.7b19160d.js","/test_projects/assets/index.747239a4.css"]))),IconButton:s((()=>e((()=>__import__("./icon-button.49984341.js")),["/test_projects/assets/icon-button.49984341.js","/test_projects/assets/index.7b19160d.js","/test_projects/assets/index.747239a4.css","/test_projects/assets/styled-button-i.3171b0e3.js"])))},setup(a){const s=i(0),e=r((()=>1==s.value)),d=r((()=>0==s.value)),t=r((()=>2==s.value)),n=r((()=>3==s.value)),{email:u,isEmailExists:m,emailValidator:c,isEmailValid:p,isEmailNotEmpty:w,emailFormatErrorMessage:v}=_(),f=()=>u.value=a.email;l(a,(()=>{f()})),o((()=>{f()}));const g=r((()=>p.value&&m.value)),E=r((()=>p.value?m.value?"":"this email is not registered, please sign up":v)),{password:y,passwordValidator:P,isPasswordValid:k,user:b,passwordLengthErrorMessage:C}=V({email:u}),M=i(!1),S=r((()=>M.value?"wrong password, please try another":C));return{title:r((()=>{switch(s.value){case 0:case 1:return"Welcome back";case 2:return"Password recovery";case 3:default:return""}})),email:u,isEmailExists:m,emailErrorMessage:E,emailValidator:c,isEmailValid:p,isEmailNotEmpty:w,enableEmailStep:()=>s.value=0,verifyEmail:()=>{m.value&&(s.value=1)},isPasswordStep:e,isEmailStep:d,isPasswordRecovery:t,isAuthorized:n,isWrongPassword:M,passwordErrorMessage:S,password:y,passwordValidator:P,isPasswordValid:k,user:b,confirmPassword:()=>{h.isPasswordValidForEmail({user:b.value})?(M.value=!1,s.value=3):M.value=!0},forgotPassword:()=>{s.value=2},isEmailReady:g}}});const M={class:"text center h4"},S=u("div",{class:"h-4"},null,-1),R={class:"column main-align-start fade-group-item",key:"isAuth"},A=u("div",{class:"ml-4"},"Forgot password?",-1),U={class:"column fade-group-item",key:"isAuthorized"},j=u("div",{class:"p"},"You succefully authorized!",-1),x=y("Back"),z={class:"column fade-group-item",key:"isPasswordRecovery"},T={class:"p mb-8"},I=u("div",{class:"p"},"Please follow them to recover your password safely. ",-1),B=y("Back");C.render=function(a,s,e,i,r,l){const o=d("icon-button"),y=d("field"),h=d("styled-button");return t(),n("div",null,[u("p",M,m(a.title),1),S,u(p,{name:"fade-group",tag:"div"},{default:c((()=>[a.isAuthorized||a.isPasswordRecovery?E("",!0):(t(),n("div",R,[w(u(y,{placeholder:"email",type:"email",modelValue:a.email,"onUpdate:modelValue":s[1]||(s[1]=s=>a.email=s),onKeyup:f(a.verifyEmail,["enter"]),validationCallback:a.emailValidator,errorMessage:a.emailErrorMessage,required:!0,onUpdateIsValueValid:s[2]||(s[2]=s=>a.isEmailValid=s),showErrorMessage:!a.isEmailReady},{suffix:c((()=>[u(g,{name:"fade"},{default:c((()=>[w(u(o,{class:"ml-4",onClick:a.verifyEmail},{default:c((()=>[u("img",{src:"./assets/send.svg"},null,8,["src"])])),_:1},8,["onClick"]),[[v,a.isEmailReady]])])),_:1})])),_:1},8,["modelValue","onKeyup","validationCallback","errorMessage","showErrorMessage"]),[[v,a.isEmailStep]]),u(g,{name:"fade-1"},{default:c((()=>[w(u(y,{placeholder:"password",type:"password",modelValue:a.password,"onUpdate:modelValue":s[3]||(s[3]=s=>a.password=s),validationCallback:a.passwordValidator,errorMessage:a.passwordErrorMessage,required:!0,onUpdateIsValueValid:s[4]||(s[4]=s=>a.isPasswordValid=s),onKeyup:f(a.confirmPassword,["enter"]),showErrorMessage:a.isWrongPassword},{suffix:c((()=>[u(g,{name:"fade"},{default:c((()=>[w(u(o,{class:"ml-4",onClick:a.confirmPassword},{default:c((()=>[u("img",{src:"./assets/send.svg"},null,8,["src"])])),_:1},8,["onClick"]),[[v,a.isPasswordValid]])])),_:1})])),_:1},8,["modelValue","validationCallback","errorMessage","onKeyup","showErrorMessage"]),[[v,a.isPasswordStep]])])),_:1}),u(g,{name:"fade-1"},{default:c((()=>[w(u(h,{class:"h-2 border-radius-5",mainAlignClass:"main-align-left cross-align-center",onClick:a.forgotPassword},{default:c((()=>[A])),_:1},8,["onClick"]),[[v,a.isPasswordStep]])])),_:1})])),a.isAuthorized?(t(),n("div",U,[j,u(h,{onClick:a.enableEmailStep},{default:c((()=>[x])),_:1},8,["onClick"])])):E("",!0),a.isPasswordRecovery?(t(),n("div",z,[u("div",T,"We sent email to "+m(a.email)+" with password change instructions. ",1),I,u(h,{onClick:a.enableEmailStep},{default:c((()=>[B])),_:1},8,["onClick"])])):E("",!0)])),_:1})])};export default C;
